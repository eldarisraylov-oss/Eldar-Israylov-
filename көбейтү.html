<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>–ö”©–±–µ–π—Ç—É –∫–µ—Å—Ç–µ—Å—ñ ‚Äî –¢–µ—Å—Ç</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f6fb;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .container {
        width: 90%;
        max-width: 600px;
        text-align: center;
        background: #ffffff;
        padding: 30px;
        border-radius: 16px;
        box-shadow: 0 0 25px rgba(0,0,0,0.15);
    }
    button {
        background: #4a6cf7;
        color: white;
        padding: 14px 22px;
        font-size: 20px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: .3s;
        margin-top: 15px;
    }
    button:hover { background: #3452d1; }
    #question {
        font-size: 40px;
        margin: 25px 0;
        font-weight: bold;
    }
    input {
        font-size: 26px;
        padding: 12px;
        width: 200px;
        text-align: center;
        border-radius: 8px;
        border: 2px solid #ccc;
    }
    /* –°–∞–Ω ”©—Ä—ñ—Å—ñ–Ω–¥–µ–≥—ñ ‚Üë‚Üì —Å—Ç—Ä–µ–ª–∫–∞–ª–∞—Ä–¥—ã –∞–ª—ã–ø —Ç–∞—Å—Ç–∞—É */
    input::-webkit-inner-spin-button,
    input::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    input[type=number] {
        -moz-appearance: textfield;
    }

    .grid {
        margin-top: 25px;
        display: grid;
        grid-template-columns: repeat(10 , 1fr);
        gap: 6px;
    }
    .box {
        width: 100%;
        padding-top: 100%;
        position: relative;
        background: #e6e7ea;
        border-radius: 7px;
    }
    .box span {
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50% , -50%);
        font-size: 24px;
    }
    #timer {
        font-size: 26px;
        color: red;
        margin-top: 8px;
        font-weight: bold;
    }
    #summary {
        font-size: 22px;
        margin-top: 25px;
    }
</style>
</head>

<body>
<div class="container">
    <h2>–ö”©–±–µ–π—Ç—É –∫–µ—Å—Ç–µ—Å—ñ ‚Äî –¢–µ—Å—Ç</h2>
    <button id="startBtn" onclick="startGame()">‚ñ∂ –ë–∞—Å—Ç–∞—É</button>

    <div id="game" style="display:none;">
        <div id="question"></div>
        <input id="answer" type="number" placeholder="–ñ–∞—É–∞–ø" autofocus />
        <div id="timer"></div>
        <button onclick="buttonNext()">‚è≠ –ö–µ–ª–µ—Å—ñ</button>

        <div class="grid" id="results"></div>
    </div>

    <div id="summary" style="display:none;"></div>
</div>

<!-- üéß –î—ã–±—ã—Å—Ç–∞—Ä (HTML —Ñ–∞–π–ª—ã —Ç“±—Ä“ì–∞–Ω “õ–∞–ª—Ç–∞“ì–∞ “õ–æ—é –∫–µ—Ä–µ–∫) -->
<audio id="okSound" preload="auto">
  <source src="–¥—É—Ä—ã—Å.mp3" type="audio/mpeg">
</audio>
<audio id="errSound" preload="auto">
  <source src="“õ–∞—Ç–µ.mp3" type="audio/mpeg">
</audio>

<script>
    let questions = [];
    let index = 0;
    let correct = 0;
    let wrong = 0;
    let timer;
    const maxQuestions = 30;
    let checked = false;

    function randomInt(min, max) {
        return Math.floor(Math.random() * (max-min+1)) + min;
    }

    function createQuestions() {
        questions = [];
        for(let i=0;i<maxQuestions;i++){
            let a = randomInt(2,9);
            let b = randomInt(1,10);
            questions.push({a,b,ans:a*b});
        }
    }

    function startGame(){
        index=0; correct=0; wrong=0; checked=false;
        document.getElementById("summary").style.display="none";
        document.getElementById("startBtn").style.display="none";
        document.getElementById("game").style.display="block";
        createQuestions();
        drawResultBoxes();
        showQuestion();
    }

    function drawResultBoxes(){
        let res = document.getElementById("results");
        res.innerHTML = "";
        for(let i=0;i<maxQuestions;i++){
            res.innerHTML += `<div class="box" id="b${i}"><span></span></div>`;
        }
    }

    function showQuestion(){
        if(index>=maxQuestions) return finish();
        checked=false;
        let q = questions[index];
        document.getElementById("question").innerText = `${q.a} √ó ${q.b} = ?`;
        let input = document.getElementById("answer");
        input.value = "";
        input.style.color = "black";
        input.focus();
        startTimer();
    }

    function startTimer(){
        let timeLeft=5;
        document.getElementById("timer").innerText=timeLeft;
        timer=setInterval(()=>{
            timeLeft--;
            document.getElementById("timer").innerText=timeLeft;
            if(timeLeft<=0){
                clearInterval(timer);
                checkAnswer(true);
            }
        },1000);
    }

    function checkAnswer(timeOver){
        if(checked) return;
        checked=true;
        clearInterval(timer);

        let input = document.getElementById("answer");
        let userVal = input.value;
        let q = questions[index];
        let box = document.getElementById("b"+index).children[0];

        if(timeOver || parseInt(userVal) !== q.ans){
            wrong++;
            box.innerText="‚úñ"; 
            box.style.color="red";
            document.getElementById("errSound").volume = 1.0;
            document.getElementById("errSound").play();
            document.getElementById("question").innerText = `${q.a} √ó ${q.b} = ${q.ans}`;
            input.style.color = "red";
        } 
        else {
            correct++;
            box.innerText="‚úî";
            box.style.color="green";
            document.getElementById("okSound").volume = 1.0;
            document.getElementById("okSound").play();
            document.getElementById("question").innerText = `${q.a} √ó ${q.b} = ${q.ans}`;
            input.style.color = "green";
        }

        index++;
    }

    function buttonNext(){
        if(!checked){
            checkAnswer(false);
            return;
        }
        showQuestion();
    }

    document.addEventListener("keydown",e=>{
        if(e.code==="Enter"){ checkAnswer(false); }
        if(e.code==="Space"){
            if(!checked){ checkAnswer(false); return; }
            showQuestion();
        }
    });

    // üö´ –≠–∫—Ä–∞–Ω–¥–∞“ì—ã –±–æ—Å –∂–µ—Ä–¥—ñ –±–∞—Å“õ–∞–Ω–¥–∞ ‚Äî —Ñ–æ–∫—É—Å –∂–æ“ì–∞–ª—Ç–ø–∞–π–º—ã–∑
    document.body.addEventListener("mousedown", function(e){
        if(e.target.id === "answer" || e.target.tagName === "BUTTON") return;
        e.preventDefault();
    }, true);

    function finish(){
        document.getElementById("game").style.display="none";
        let ball = (correct/maxQuestions*5).toFixed(2);
        document.getElementById("summary").style.display="block";
        document.getElementById("summary").innerHTML = `
            <b>–¢–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã!</b><br>
            –î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç–∞—Ä: ${correct}<br>
            “ö–∞—Ç–µ –∂–∞—É–∞–ø—Ç–∞—Ä: ${wrong}<br>
            –ë–∞“ì–∞ (5 –±–∞–ª–¥—ã“õ –∂“Ø–π–µ–º–µ–Ω): <b>${ball.replace(".",",")}</b><br><br>
            <button onclick="restart()">‚Ü∫ “ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
        `;
    }

    function restart(){
        document.getElementById("summary").style.display="none";
        document.getElementById("startBtn").style.display="inline-block";
        document.getElementById("game").style.display="none";
    }
</script>
</body>
</html>
